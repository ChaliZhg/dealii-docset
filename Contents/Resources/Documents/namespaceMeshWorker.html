<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The deal.II Library: MeshWorker Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link rel="SHORTCUT ICON" href="deal.ico"></link>
<script type="text/javascript" src="custom.js"></script>
<meta name="author" content="The deal.II Authors <authors@dealii.org>"></meta>
<meta name="copyright" content="Copyright (C) 1998 - 2017 by the deal.II authors"></meta>
<meta name="deal.II-version" content="9.0.0-pre"></meta>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo200.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber">Reference documentation for deal.II version 9.0.0-pre</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MeshWorker Namespace Reference<div class="ingroups"><a class="el" href="group__Integrators.html">Integrators</a> &raquo; <a class="el" href="group__MeshWorker.html">The MeshWorker interface</a> &#124; <a class="el" href="group__Integrators.html">Integrators</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceMeshWorker_1_1Assembler"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceMeshWorker_1_1Assembler.html">Assembler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1DoFInfo.html">DoFInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1DoFInfoBox.html">DoFInfoBox</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1IntegrationInfo.html">IntegrationInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1IntegrationInfoBox.html">IntegrationInfoBox</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1LocalIntegrator.html">LocalIntegrator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1LocalResults.html">LocalResults</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1MGVectorData.html">MGVectorData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1VectorData.html">VectorData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1VectorDataBase.html">VectorDataBase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMeshWorker_1_1VectorSelector.html">VectorSelector</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf5a59dde8686a651b12d040cc5afdf9a"><td class="memTemplParams" colspan="2">template&lt;class INFOBOX , class DOFINFO , int dim, int spacedim, class ITERATOR &gt; </td></tr>
<tr class="memitem:gaf5a59dde8686a651b12d040cc5afdf9a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__MeshWorker.html#gaf5a59dde8686a651b12d040cc5afdf9a">cell_action</a> (ITERATOR cell, <a class="el" href="classMeshWorker_1_1DoFInfoBox.html">DoFInfoBox</a>&lt; dim, DOFINFO &gt; &amp;dof_info, INFOBOX &amp;info, const std::function&lt; void(DOFINFO &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;cell_worker, const std::function&lt; void(DOFINFO &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;boundary_worker, const std::function&lt; void(DOFINFO &amp;, DOFINFO &amp;, typename INFOBOX::CellInfo &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;face_worker, const <a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a> &amp;loop_control)</td></tr>
<tr class="separator:gaf5a59dde8686a651b12d040cc5afdf9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad10f528ab87f39fbb0531d24f238b2f3"><td class="memTemplParams" colspan="2">template&lt;int dim, int spacedim, class DOFINFO , class INFOBOX , class ASSEMBLER , class ITERATOR &gt; </td></tr>
<tr class="memitem:gad10f528ab87f39fbb0531d24f238b2f3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop</a> (ITERATOR begin, typename <a class="el" href="structidentity.html">identity</a>&lt; ITERATOR &gt;::type end, DOFINFO &amp;dinfo, INFOBOX &amp;info, const std::function&lt; void(DOFINFO &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;cell_worker, const std::function&lt; void(DOFINFO &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;boundary_worker, const std::function&lt; void(DOFINFO &amp;, DOFINFO &amp;, typename INFOBOX::CellInfo &amp;, typename INFOBOX::CellInfo &amp;)&gt; &amp;face_worker, ASSEMBLER &amp;assembler, const <a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a> &amp;lctrl=<a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a>())</td></tr>
<tr class="separator:gad10f528ab87f39fbb0531d24f238b2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93cfb35f7969ce8f0be7628255dfe7fb"><td class="memTemplParams" colspan="2">template&lt;int dim, int spacedim, class ITERATOR , class ASSEMBLER &gt; </td></tr>
<tr class="memitem:ga93cfb35f7969ce8f0be7628255dfe7fb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__MeshWorker.html#ga93cfb35f7969ce8f0be7628255dfe7fb">integration_loop</a> (ITERATOR begin, typename <a class="el" href="structidentity.html">identity</a>&lt; ITERATOR &gt;::type end, <a class="el" href="classMeshWorker_1_1DoFInfo.html">DoFInfo</a>&lt; dim, spacedim &gt; &amp;dof_info, <a class="el" href="classMeshWorker_1_1IntegrationInfoBox.html">IntegrationInfoBox</a>&lt; dim, spacedim &gt; &amp;box, const <a class="el" href="classMeshWorker_1_1LocalIntegrator.html">LocalIntegrator</a>&lt; dim, spacedim &gt; &amp;integrator, ASSEMBLER &amp;assembler, const <a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a> &amp;lctrl=<a class="el" href="classMeshWorker_1_1LoopControl.html">LoopControl</a>())</td></tr>
<tr class="separator:ga93cfb35f7969ce8f0be7628255dfe7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A collection of functions and classes for the mesh loops that are an ubiquitous part of each finite element program.</p>
<p>The workhorse of this namespace is the <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> function, which implements a completely generic loop over all mesh cells. Since the calls to <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> are error-prone due to its generality, for many applications it is advisable to derive a class from <a class="el" href="classMeshWorker_1_1LocalIntegrator.html">MeshWorker::LocalIntegrator</a> and use the less general <a class="el" href="group__MeshWorker.html#ga93cfb35f7969ce8f0be7628255dfe7fb">integration_loop()</a> instead.</p>
<p>The <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> depends on certain objects handed to it as arguments. These objects are of two types, info objects like <a class="el" href="classMeshWorker_1_1DoFInfo.html">DoFInfo</a> and <a class="el" href="classMeshWorker_1_1IntegrationInfo.html">IntegrationInfo</a> and worker objects like LocalWorker and IntegrationWorker.</p>
<p>Worker objects usually do two different jobs: first, they compute the local contribution of a cell or face to the global operation. Second, they assemble this local contribution into the global result, whether a functional, a form or a bilinear form. While the first job is particular to the problem being solved, the second is generic and only depends on the data structures. Therefore, base classes for workers assembling into global data are provided in the namespace <a class="el" href="namespaceMeshWorker_1_1Assembler.html">Assembler</a>.</p>
<h3>Template argument types</h3>
<p>The functions <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> and <a class="el" href="group__MeshWorker.html#gaf5a59dde8686a651b12d040cc5afdf9a">cell_action()</a> take some arguments which are template parameters. Let us list the minimum requirements for these classes here and describe their properties.</p>
<h4>ITERATOR</h4>
<p>Any object that has an <code><a class="el" href="structSynchronousIterators.html#a574336a8166e3537d57c0d677df48ce9">operator++()</a></code> and points to a TriaObjectAccessor.</p>
<h4>DOFINFO</h4>
<p>For an example implementation, refer to the class template <a class="el" href="classMeshWorker_1_1DoFInfo.html">DoFInfo</a>. In order to work with <a class="el" href="group__MeshWorker.html#gaf5a59dde8686a651b12d040cc5afdf9a">cell_action()</a> and <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a>, DOFINFO needs to follow the following interface. </p><div class="fragment"><div class="line"><span class="keyword">class </span>DOFINFO</div><div class="line">{</div><div class="line">  <span class="keyword">private</span>:</div><div class="line">    DOFINFO();</div><div class="line">    DOFINFO(<span class="keyword">const</span> DOFINFO&amp;);</div><div class="line">    DOFINFO&amp; operator=(<span class="keyword">const</span> DOFINFO&amp;);</div><div class="line"></div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> CellIt&gt;</div><div class="line">    <span class="keywordtype">void</span> reinit(<span class="keyword">const</span> CellIt&amp; c);</div><div class="line"></div><div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> CellIt, <span class="keyword">class</span> FaceIt&gt;</div><div class="line">    <span class="keywordtype">void</span> reinit(<span class="keyword">const</span> CellIt&amp; c, <span class="keyword">const</span> FaceIt&amp; f, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n);</div><div class="line"></div><div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> CellIt, <span class="keyword">class</span> FaceIt&gt;</div><div class="line">    <span class="keywordtype">void</span> reinit(<span class="keyword">const</span> CellIt&amp; c, <span class="keyword">const</span> FaceIt&amp; f, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n,</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> s);</div><div class="line"></div><div class="line">  <span class="keyword">friend</span> <span class="keyword">template</span> <span class="keyword">class </span>DoFInfoBox&lt;int dim, DOFINFO&gt;;</div><div class="line">};</div></div><!-- fragment --><p>The three private functions are called by <a class="el" href="classMeshWorker_1_1DoFInfoBox.html">DoFInfoBox</a> and should not be needed elsewhere. Obviously, they can be made public and then the friend declaration at the end may be missing.</p>
<p>Additionally, you will need at least one public constructor. Furthermore DOFINFO is pretty useless yet: functions to interface with INTEGRATIONINFO and ASSEMBLER are needed.</p>
<p>DOFINFO objects are gathered in a <a class="el" href="classMeshWorker_1_1DoFInfoBox.html">DoFInfoBox</a>. In those objects, we store the results of local operations on each cell and its faces. Once all this information has been gathered, an ASSEMBLER is used to assemble it into golbal data.</p>
<h4>INFOBOX</h4>
<p>This type is exemplified in <a class="el" href="classMeshWorker_1_1IntegrationInfoBox.html">IntegrationInfoBox</a>. It collects the input data for actions on cells and faces in INFO objects (see below). It provides the following interface to <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> and <a class="el" href="group__MeshWorker.html#gaf5a59dde8686a651b12d040cc5afdf9a">cell_action()</a>:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>INFOBOX</div><div class="line">{</div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> dim, <span class="keyword">class</span> DOFINFO&gt;</div><div class="line">    <span class="keywordtype">void</span> post_cell(<span class="keyword">const</span> DoFInfoBox&lt;dim, DOFINFO&gt;&amp;);</div><div class="line"></div><div class="line">    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> dim, <span class="keyword">class</span> DOFINFO&gt;</div><div class="line">    <span class="keywordtype">void</span> post_faces(<span class="keyword">const</span> DoFInfoBox&lt;dim, DOFINFO&gt;&amp;);</div><div class="line"></div><div class="line">    INFO cell;</div><div class="line">    INFO boundary;</div><div class="line">    INFO face;</div><div class="line">    INFO subface;</div><div class="line">    INFO neighbor;</div><div class="line">};</div></div><!-- fragment --><p>The main purpose of this class is gathering the five INFO objects, which contain the temporary data used on each cell or face. The requirements on these objects are listed below. Here, we only note that there need to be these 5 objects with the names listed above.</p>
<p>The two function templates are call back functions called in <a class="el" href="group__MeshWorker.html#gaf5a59dde8686a651b12d040cc5afdf9a">cell_action()</a>. The first is called before the faces are worked on, the second after the faces.</p>
<h4>INFO</h4>
<p>See <a class="el" href="classMeshWorker_1_1IntegrationInfo.html">IntegrationInfo</a> for an example of these objects. They contain the temporary data needed on each cell or face to compute the result. The <a class="el" href="namespaceMeshWorker.html">MeshWorker</a> only uses the interface</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>INFO</div><div class="line">{</div><div class="line">  <span class="keyword">public</span>:</div><div class="line">    <span class="keywordtype">void</span> reinit(<span class="keyword">const</span> DOFINFO&amp; i);</div><div class="line">};</div></div><!-- fragment --><h3>Simplified interfaces</h3>
<p>Since the <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> is fairly general, a specialization <a class="el" href="group__MeshWorker.html#ga93cfb35f7969ce8f0be7628255dfe7fb">integration_loop()</a> is available, which is a wrapper around <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> with a simplified interface.</p>
<p>The <a class="el" href="group__MeshWorker.html#ga93cfb35f7969ce8f0be7628255dfe7fb">integration_loop()</a> function loop takes most of the information that it needs to pass to <a class="el" href="group__MeshWorker.html#gad10f528ab87f39fbb0531d24f238b2f3">loop()</a> from an <a class="el" href="classMeshWorker_1_1IntegrationInfoBox.html">IntegrationInfoBox</a> object. Its use is explained in <a class="el" href="step_12.html">step-12</a>, but in short it requires functions that do the local integration on a cell, interior or boundary face, and it needs an object (called "assembler") that copies these local contributions into the global matrix and right hand side objects.</p>
<p>Before we can run the integration loop, we have to initialize several data structures in our IntegrationWorker and assembler objects. For instance, we have to decide on the quadrature rule or we may need more than the default update flags.</p>
<dl class="section author"><dt>Author</dt><dd>Guido Kanschat </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009 </dd></dl>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
